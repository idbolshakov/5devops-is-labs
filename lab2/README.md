# Лабораторная работа №2. Разграничение прав доступа

## Пояснительная записка

* ход выполнения практического задания
1. запускаем `docker compose up -d` из корня папки с лабораторной работой
2. с помощью `docker exec -it lab2-ubuntu-1 /bin/bash` заходим в систему как root
3. запускаем скрипт инциализации `/tmp/0.sh`
4. запускаем скрипт `1.sh` для выполнения первых пяти пунктов задания `/tmp/1.sh > /logs/1.log`
4. выходим `exit`
5. в первом терминале с помощью `docker exec -it -u sit lab2-ubuntu-1 /bin/bash` заходим в систему как sit
5. во втором терминале с помощью `docker exec -it -u sit2 lab2-ubuntu-1 /bin/bash` заходим в систему как sit2
6. для выполнения следующих 11 пунктов задания:
7. в первом терминале запускаем скрипт `/tmp/2.sh > /logs/2.log`
8. во втором терминале запускаем скрипт `/tmp/3.sh > /logs/3.log`
9. следуем последовательным инструкциям в терминалах до окнчания выполнения скриптов
10. в первом терминале вводим `exit` для выхода из системы
11. в первом терминале с помощью `docker exec -it -u sit lab2-ubuntu-1 /bin/bash` заходим в систему как sit
12. в первом терминале запускаем скрипт `/tmp/4.sh > /logs/4.log` для выполнения следующих 2-х пунктов задания.
13. во втором терминале вводим `exit` для выхода из системы
14. во втором терминале с помощью `docker exec -it lab2-ubuntu-1 /bin/bash` заходим в систему как root
15. во втором терминале запускаем скрипт `/tmp/5.sh > /logs/5.log` для выполнения последних 2-х пунктов задания.


## Файловая структура отчета

* [ANSWERS.md](ANSWERS.md)  - ответы на теоретические вопросы лабораторной работы
* [scripts/](scripts/)      - директория с bash-скриптами для выполнения практических заданий лабораторной работы
* [logs/](logs/)            - директория с stdout логами bash-скриптов из `scripts/`
* [docker-compose.yaml](docker-compose.yaml) - конфигурационный файл контейнера с ubuntu


## Задания к лабораторной работе

* Откройте два терминала (в серверных Linux для переключения между терминалами (tty) обычно используется сочетание клавиш Alt+F[1-5]). В одном из них получите права суперпользователя используя команду sudo su:
* Изучите как создать пользователя с домашним каталогом с помощью команды useradd из справочной документации man
* Используя useradd создайте пользователя «sit2» c домашним каталогом «sit2».
* Установите пароль для нового пользователя «sit2» с помощью команды passwd sit2
* Выйдите из суперпользователя командой exit

---

* Войдите под первым терминалом в пользователя «sit», во втором в пользователя «sit2».
* Посмотрите какой идентификатор получил пользователь «sit» и пользователь «sit2» используя команду id
* Посмотрите права доступа на домашний каталог пользователей «sit» и «sit2», используя команду ls
* Создайте файл под пользователем «sit2» с маской 0077 используя umask
* Попробуйте прочитать его содержимое под пользователем «sit» используя команду cat
* Измените права доступа на файл так, чтобы пользователь «sit» мог записывать в файл, но не читать его.
* Запишите текстовую информацию в файл из под пользователя «sit» используя консольный текстовый редактор vi или nano
* Проверьте права на файл, и прочитайте его содержимое из под пользователя «sit2»
* Создайте каталог из под пользователя «sit2»
* Установите права записи для группы пользователей на данный каталог
* Добавьте пользователя «sit» в группу «sit2» с помощью команды usermod

---

* Проверьте в какие группы входит пользователь «sit»
* Создайте несколько файлов в каталоге, который был создан пользователем «sit2» из под пользователя «sit».

---

* Ознакомьтесь как удалить пользователя вместе с содержимым его домашнего каталога из справочной документации
* Удалите пользователя «sit2» вместе с его домашним каталогом.

## Вопросы к лабораторной работе

1. Какой uid у пользователя sit2? В какие группы он входит?
2. Почему попытка удалить пользователя не удалась, и что нужно сделать для его удаления?
3. Какие права доступа установлены на домашний каталог пользователя «sit» ?
4. Как рекурсивно изменить права доступа на файлы в каталоге?
5. Как можно осуществлять переключение между пользователями в рамках одного терминала?
6. Как удалить пользователя при этом сохранив его домашний каталог и данные внутри него?
7. Какое значение umask нужно установить, чтобы владелец и группа имели право на чтение, запись и исполнение, а все остальные пользователи не имели никаких прав?
8. Как рекурсивно снять все suid биты с файлов в каталоге?
9. Как разрешить программе (файлу) исполняться?
10. Что такое бит sticky? Для чего он предназначен?
11. Зачем нужны uid и gid?
12. Почему uid пользователя задается больше 1000?
